<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RAG 的演进之路：从“状态”到“记忆” — Dify × Milvus</title>
    <!-- Reveal.js core -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/white.css" id="reveal-theme" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.1.0/lib/Normal/MiSans-Regular.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.1.0/lib/Normal/MiSans-Medium.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.1.0/lib/Normal/MiSans-Bold.min.css" crossorigin="anonymous" />
    <!-- Custom Dify theme overrides -->
    <link rel="stylesheet" href="assets/dify-theme.css" />
  </head>
  <body>
    <div class="reveal dify-deck">
      <div class="slides">
        <!-- 1. Title -->
        <section data-background="" data-auto-animate class="intro full-bleed">
          <div class="intro-inner">
            <figure class="brand-lockup">
              <img src="assets/dify-design-kit/co-branding/co-branding.svg" alt="Dify × Milvus 联合分享" loading="lazy" />
            </figure>
            <h1 class="headline" data-id="title">RAG 的演进之路：从“状态”到“记忆”</h1>
            <p class="subtitle">Dify × Milvus 联合技术分享</p>
            <div class="meta">
              <div class="speaker">演讲者：郑立 @ Dify 开源生态负责人</div>
              <div class="event">Unstructured Data Meetup · 30 分钟</div>
            </div>
          </div>
          <aside class="notes">
            开场 1 分钟：自我介绍，说明本次联合分享背景和目标。
            强调主题：RAG 的核心价值不是“检索”，而是为 LLM 构建可管理的“记忆”。
          </aside>
        </section>

        <!-- 2. Who / Why -->
        <section data-auto-animate>
          <h2>这 30 分钟，适合谁？</h2>
          <div class="two-cols">
            <div>
              <ul>
                <li class="fragment">AI 工程师 / LLM 应用开发者</li>
                <li class="fragment">数据科学家与算法工程师</li>
                <li class="fragment">数据平台 / 基建工程师</li>
                <li class="fragment">AI 产品经理 / 技术负责人</li>
              </ul>
            </div>
            <div>
              <p class="dim">你将获得：</p>
              <ul>
                <li class="fragment">一套从“状态到记忆”的 RAG 方法论</li>
                <li class="fragment">可复用的知识管道与评估清单</li>
                <li class="fragment">Dify × Milvus 的实战组合范式</li>
              </ul>
            </div>
          </div>
          <aside class="notes">
            1 分钟：基于目标受众澄清收益点，与 meetup 的主题对齐。
          </aside>
        </section>

        <!-- 3. Key Takeaways -->
        <section data-auto-animate>
          <h2>要点先知（Key Takeaways）</h2>
          <p class="punch">别“交付 <strong>RAG</strong>”，要交付可运营的<strong>检索与记忆</strong>。</p>
          <ul>
            <li class="fragment">RAG 的终局：把“状态”运营成可被 Agent 主动使用的“记忆”</li>
            <li class="fragment">质量上限来自“知识管道”，不是检索模型本身</li>
            <li class="fragment">Dify 管道 × Milvus 底座：端到端记忆构建与使用</li>
          </ul>
          <aside class="notes">
            1 分钟：概述三大要点，提供听众期待框架。
          </aside>
        </section>

        <!-- 4. Value of RAG as Memory -->
        <section data-auto-animate>
          <h2>RAG 的真正价值：为 LLM 构建“记忆”</h2>
          <div class="two-cols">
            <div>
              <p>LLM 擅长“计算 (Compute)”，参数内知识是静态的。</p>
              <p>RAG 是给 LLM 挂载一个外部、动态的 <strong>记忆 (Memory)</strong>。</p>
              <p class="dim">“RAG 是一个谱系 (Spectrum)”，从简单到复杂逐步演进。</p>
              <p class="punch">LLMs 能读；请给它<strong>干净的上下文</strong>。</p>
            </div>
            <div class="diagram memory-bus">
              <div class="box">LLM 大脑<br><span class="dim">（静态知识）</span></div>
              <div class="bus">RAG 总线</div>
              <div class="box">外部记忆体<br><span class="dim">（动态知识）</span></div>
            </div>
          </div>
          <aside class="notes">
            2 分钟：强调“记忆 vs 计算”，用总线隐喻帮助建立直觉。
          </aside>
        </section>

        <!-- 5. Spectrum / Agenda -->
        <section data-auto-animate>
          <h2>RAG 演进谱系</h2>
          <div class="agenda-grid">
            <div class="agenda-item">Naive RAG<br><span class="dim">从 0 到 1 的“状态”</span></div>
            <div class="agenda-item">Advanced RAG<br><span class="dim">运营“状态”的质量</span></div>
            <div class="agenda-item">Agentic RAG<br><span class="dim">“记忆”进入 Agent</span></div>
            <div class="agenda-item">Knowledge Pipeline<br><span class="dim">高质量记忆的生产线</span></div>
          </div>
          <aside class="notes">
            1 分钟：交代结构与演进顺序，方便后续定位。
          </aside>
        </section>

        <!-- 6. Naive RAG -->
        <section data-auto-animate>
          <h2>阶段一：Naive RAG（简单“状态”检索）</h2>
          <div class="two-cols">
            <div>
              <p class="dim">架构</p>
              <p>Query → Embedding → 向量检索（Milvus）→ Chunks → LLM</p>
              <p class="dim">存在问题</p>
              <ul>
                <li class="fragment">语义割裂：固定切片导致上下文断裂</li>
                <li class="fragment">检索噪音：次相关内容占位</li>
                <li class="fragment">大海捞针：关键信息淹没其中</li>
              </ul>
            </div>
            <div class="diagram naive"></div>
          </div>
          <aside class="notes">
            2 分钟：定义 Naive RAG 的可用性与局限，为改进铺垫。
          </aside>
        </section>

        <!-- 7. Advanced RAG - Parent/Child & Rerank -->
        <section data-auto-animate>
          <h2>阶段二：Advanced RAG（提升“状态”质量）</h2>
          <div class="two-cols">
            <div>
              <p class="dim">关键实践 1</p>
              <p><strong>父子文档检索 (Parent–Child Retrieval)</strong></p>
              <p>命中“子块”时携带“父块”上下文，兼顾精度与语境完整性。</p>
              <p class="dim">关键实践 2</p>
              <p><strong>Reranking 重排序</strong>：粗召回 → 精排，降低噪音。</p>
            </div>
            <div class="diagram parent-child"></div>
          </div>
          <aside class="notes">
            2 分钟：说明两个抓手如何同时缓解割裂与噪音问题。
          </aside>
        </section>

        <!-- 8. Advanced RAG toolbox (reorg for audience) -->
        <section data-auto-animate>
          <h2>质量提升工具箱（面向实战）</h2>
          <ul>
            <li class="fragment">混合召回（Hybrid）：向量 + 词法/正则 + 过滤</li>
            <li class="fragment">精排优先：组装上下文前，务必 <strong>Re-rank</strong></li>
            <li class="fragment">智能分块：语义/标题感知 + 父子结构</li>
            <li class="fragment">上下文工程：去重合并、多样化来源、硬性 token 上限</li>
            <li class="fragment">查询重写：模糊/复合意图标准化</li>
          </ul>
          <aside class="notes">
            2 分钟：从工程视角给到落地清单，结合“先精排，后组装”“混合召回”的做法。
          </aside>
        </section>

        <!-- 8.1 The 5 Retrieval Tips (from interview) -->
        <section data-auto-animate>
          <h2>Retrieval 作战手册：5 条铁律</h2>
          <ul>
            <li class="fragment"><strong>别交付 RAG，交付检索</strong>：命名清楚原语（稠密/稀疏、过滤、重排、组装、评估）。</li>
            <li class="fragment"><strong>第一跳赢在混合召回</strong>：200–300 候选足矣，LLM 读得动。</li>
            <li class="fragment"><strong>先重排，后组装</strong>：总是在拼上下文之前做 Re-rank。</li>
            <li class="fragment"><strong>尊重上下文腐烂</strong>：紧凑、结构化胜于最大窗口。</li>
            <li class="fragment"><strong>一晚 + 披萨 = 金标集</strong>：小 Gold Set 接入 CI/看板。</li>
          </ul>
          <aside class="notes">
            2–3 分钟：逐条讲解，突出“混合召回、重排优先、上下文工程、评估闭环”。
          </aside>
        </section>

        <!-- 8.2 Ingest / Query / Outer loop (from interview) -->
        <section data-auto-animate>
          <h2>检索系统三段式：Ingest / Query / Outer Loop</h2>
          <p class="punch">赢在<strong>第一跳</strong>，稳在<strong>外环</strong>。</p>
          <div class="two-cols">
            <div>
              <p class="dim">Ingest</p>
              <ul>
                <li>解析 + 分块：域感知（标题、代码、表格）</li>
                <li>富化：标题、锚点、符号、元数据</li>
                <li>可选：LLM “块摘要”；Embeddings（稠密）+ 稀疏信号</li>
                <li>写入 DB：文本、向量、元数据</li>
              </ul>
            </div>
            <div>
              <p class="dim">Query → Outer loop</p>
              <ul>
                <li>第一阶段混合：向量 + 词法/正则 + 元数据过滤</li>
                <li>候选池：~100–300；重排至 Top 20–40</li>
                <li>上下文组装：系统提示优先、去重/合并、多样化、token 硬上限</li>
                <li>外环：缓存/成本护栏，Gold Set 基准，错因分析与再分块</li>
                <li>记忆/压缩：交互轨迹 → 可检索事实</li>
              </ul>
            </div>
          </div>
          <aside class="notes">
            2–3 分钟：把流程串起来，链接到 Dify 知识管道与评估能力。
          </aside>
        </section>

        <!-- 9. Agentic RAG -->
        <section data-auto-animate>
          <h2>阶段三：Agentic RAG（从“状态”到“记忆”）</h2>
          <div class="two-cols">
            <div>
              <ul>
                <li class="fragment">意图识别 & 查询重写：先想清楚，再发问</li>
                <li class="fragment">多步推理 & 循环检索：带反思的迭代</li>
                <li class="fragment">RAG 成为可编排的 Tool，参与规划与决策</li>
              </ul>
              <p class="dim">Dify Agent 将“记忆”纳入行动循环。</p>
            </div>
            <div class="diagram agent-loop"></div>
          </div>
          <aside class="notes">
            2–3 分钟：强调“主动使用记忆”的范式转变，并引出 Dify 编排能力。
          </aside>
        </section>

        <!-- 10. Knowledge Pipeline (foundation) -->
        <section data-auto-animate>
          <h2>根基：Knowledge Pipeline（高质量“记忆”的生产线）</h2>
          <ul>
            <li class="fragment">GIGO：上限由数据质量决定</li>
            <li class="fragment">以应用为中心：处理流程与应用开发解耦</li>
            <li class="fragment">从清洗→分块→Embedding→索引的全链路可观测</li>
          </ul>
          <aside class="notes">
            2 分钟：强调“记忆生产线”理念，为后续多应用复用埋点。
          </aside>
        </section>

        <!-- 11. Pipeline benefits: reuse -->
        <section data-auto-animate>
          <h2>一次处理，多处使用</h2>
          <div class="two-cols">
            <div>
              <p>底层：一个 Milvus 知识库（如“公司 2024 年财报”）。</p>
              <p>上层：多个 Dify 应用同时复用：</p>
              <ul>
                <li class="fragment">财报分析 Agent</li>
                <li class="fragment">智能客服</li>
                <li class="fragment">HR 助手</li>
              </ul>
            </div>
            <div class="diagram reuse"></div>
          </div>
          <aside class="notes">
            1–2 分钟：突出解耦与复用，链接到成本与运维收益。
          </aside>
        </section>

        <!-- 12. Dify + Milvus alignment -->
        <section data-auto-animate>
          <h2>Dify × Milvus：RAG 演进的最佳搭档</h2>
          <div class="two-cols">
            <div>
              <p class="dim">Milvus：高性能“记忆基座”</p>
              <ul>
                <li class="fragment">存储、索引、向量/元数据的高效检索</li>
                <li class="fragment">稳定、可靠、可扩展</li>
              </ul>
            </div>
            <div>
              <p class="dim">Dify：智能“记忆与应用中台”</p>
              <ul>
                <li class="fragment">Knowledge Pipeline：构建/管理/优化记忆</li>
                <li class="fragment">Application Engine：Advanced/Agentic RAG 编排</li>
              </ul>
            </div>
          </div>
          <aside class="notes">
            2 分钟：明确分工与协同，帮助技术选型与架构沟通。
          </aside>
        </section>

        <!-- 13. Dify platform capability -->
        <section data-auto-animate>
          <h2>Dify：一站式 LLM 应用开发平台</h2>
          <ul>
            <li class="fragment">提示词工程与上下文模板</li>
            <li class="fragment">知识管道（父子文档、Rerank、评估）</li>
            <li class="fragment">Agent 编排（工具链、记忆调用）</li>
            <li class="fragment">全生命周期运营（日志、标注、分析、微调）</li>
          </ul>
          <aside class="notes">
            1–2 分钟：快速总览组件，为实践落地做铺垫。
          </aside>
        </section>

        <!-- 14. Evaluation & Metrics (added) -->
        <section data-auto-animate>
          <h2>评估与度量：让“记忆”可验证</h2>
          <p class="punch">衡量，才有<strong>改进</strong>。</p>
          <ul>
            <li class="fragment">检索：召回质量、覆盖率、冗余度、语义完整性</li>
            <li class="fragment">生成：真实性、相关性、可追溯性（来源引用）</li>
            <li class="fragment">系统：延迟、成本、稳定性、吞吐</li>
            <li class="fragment">流程：小 Gold Set + CI/看板；离线基线 + 线上 A/B</li>
          </ul>
          <aside class="notes">
            2–3 分钟：强调“小而精”的金标集与自动化，减少盲调；度量先行。
          </aside>
        </section>

        <!-- 15. Implementation checklist (added) -->
        <section data-auto-animate>
          <h2>落地清单（Checklist）</h2>
          <ul>
            <li class="fragment">数据治理：去噪、去重、边界标注与来源管理</li>
            <li class="fragment">切分策略：标题/语义感知 + 父子结构</li>
            <li class="fragment">检索链路：Milvus TopK → Rerank TopN</li>
            <li class="fragment">上下文模板：引用、格式化、约束生成</li>
            <li class="fragment">观测与告警：召回偏移、延迟异常、成本回归</li>
          </ul>
          <aside class="notes">
            2 分钟：把方法论收敛为可执行步骤，帮助团队启动或优化项目。
          </aside>
        </section>

        <!-- 16. Summary -->
        <section data-auto-animate>
          <h2>总结</h2>
          <ul>
            <li class="fragment">RAG 是谱系：从“静态状态”走向“动态记忆”</li>
            <li class="fragment">知识管道决定上限：质量、复用与规模化</li>
            <li class="fragment">Dify × Milvus：记忆构建 → 存储索引 → 使用编排</li>
          </ul>
          <aside class="notes">
            1 分钟：回扣开头的三点要约，形成闭环。
          </aside>
        </section>

        <!-- 17. Q&A / Contact -->
        <section data-auto-animate>
          <h2>Q&A</h2>
          <p class="dim">感谢聆听 · 欢迎交流</p>
          <p>郑立 · Dify 开源生态负责人</p>
          <aside class="notes">
            2–3 分钟：问答时间，收集反馈与场景需求。
          </aside>
        </section>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/notes/notes.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        width: 1920,
        height: 1080,
        margin: 0.04,
        minScale: 0.5,
        maxScale: 1.3,
        slideNumber: 'c/t',
        progress: true,
        controls: true,
        center: false,
        transition: 'fade',
        plugins: [ RevealNotes ],
      });
    </script>
  </body>
  </html>
